<!DOCTYPE html>
<html lang="en">
  <head>
    {{ template "head.html" . }}
    <title>{{ index .Meta "title" }}</title>
  </head>
  <body>
 <nav class="navbar">
  <a href="index.html"
    ><img src="static/site/Trigon.jpg" alt="SpaceMan" height="60px" width="60px" alt="Logo" class="logo"></a>
    </nav>

    <header class="header-image" style="background-image: url('{{ index .Meta "himg" }}');" role="img" aria-label="Wunder"></header>

    <div class="content">
        <aside class="sidebar">
          <h2>{{ index .Meta "desc" }}</h2><hr>
                  {{ template "nav.html" . }}
                  </aside>
      <div class="main-content">
      <main class="main">
   {{ .Body }}
      </main>
         <nav class="two-column-navbar" aria-label="Secondary Navigation">
                <div class="navbar-column">
                  <h3>Current</h3>
                  <hr>
    {{ if .Nav.Current }} {{ if lt ( len .Nav.Current ) 7 }}<ul>
    {{ range $_, $element := .Nav.Current }}
    <li><a href="{{ $element.Href }}">{{ $element.Name }}</a></li>
    {{ end }} {{ end }}</ul>  
    {{ end }}
</div>
           <div class="navbar-column">
             <h3>Child</h3>
             <hr>
    {{ if .Nav.Child }} {{ if lt ( len .Nav.Child ) 7 }}<ul>
    {{ range $_, $element := .Nav.Child }}
    <li><a href="{{ $element.Href }}">{{ $element.Name }}</a></li>
    {{ end }} {{ end }}</ul>
    {{ end }}
           </div>
         </nav>
      </div>
    </div>

<footer class="footer">
        <p>Hello There!</p>
    </footer>
    <script>
const theme = new Theme();
theme.install(document.body);
theme.start();
theme.onLoad = callback
    </script>
    <script>
              let player;
        let currentTrackIndex = 0;
        let isExpanded = false;

        // List of music tracks (Video IDs and Titles)
        const tracks = [
            { id: 'dQw4w9WgXcQ', title: 'Never Gonna Give You Up - Rick Astley' },
            { id: '3JZ_D3ELwOQ', title: 'Bohemian Rhapsody - Queen' },
            { id: 'y6120QOlsfU', title: 'Darude - Sandstorm' }
        ];

        // When YouTube API is ready, initialize the player
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '0', // Hide video
                width: '0',  // Hide video
                videoId: tracks[currentTrackIndex].id, // Load the first track
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        // Update the displayed title when the player is ready
        function onPlayerReady(event) {
            updateTrackTitle();
        }

        // Update track title based on the current track
        function updateTrackTitle() {
            document.getElementById('musicTitle').innerText = tracks[currentTrackIndex].title;
        }

        // Play the current track
        document.getElementById('playButton').addEventListener('click', function() {
            player.playVideo();
        });

        // Pause the current track
        document.getElementById('pauseButton').addEventListener('click', function() {
            player.pauseVideo();
        });

        // Move to the next track in the list
        document.getElementById('nextButton').addEventListener('click', function() {
            currentTrackIndex = (currentTrackIndex + 1) % tracks.length; // Loop back to start
            loadTrack();
        });

        // Move to the previous track in the list
        document.getElementById('prevButton').addEventListener('click', function() {
            currentTrackIndex = (currentTrackIndex - 1 + tracks.length) % tracks.length; // Loop to end
            loadTrack();
        });

        // Load and play the selected track
        function loadTrack() {
            player.loadVideoById(tracks[currentTrackIndex].id);
            updateTrackTitle();  // Update the title display
            player.playVideo();  // Auto-play the track
        }

        // Handle state changes (optional, can be extended)
        function onPlayerStateChange(event) {
            // Example: Automatically play next track when the current one ends
            if (event.data === YT.PlayerState.ENDED) {
                currentTrackIndex = (currentTrackIndex + 1) % tracks.length;
                loadTrack();
            }
        }

        // Toggle the music capsule between button and expanded state
        document.getElementById('musicCapsule').addEventListener('click', function() {
            let capsule = document.getElementById('musicCapsule');
            let title = document.getElementById('musicTitle');
            let controls = document.getElementById('controls');

            if (isExpanded) {
                // Collapse to button state
                capsule.classList.remove('expanded');
                title.classList.remove('visible');
                controls.classList.remove('visible');
            } else {
                // Expand to full music capsule
                capsule.classList.add('expanded');
                title.classList.add('visible');
                controls.classList.add('visible');
            }

            isExpanded = !isExpanded; // Toggle the state
        });

    </script>
  </body>
</html>
